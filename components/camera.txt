// import React, { useEffect, useState, useRef } from 'react';
// import { View, Text, StyleSheet, Alert } from 'react-native';
// import { Camera, useCameraDevices, useFrameProcessor } from 'react-native-vision-camera';
// import { scanQRCodes } from 'vision-camera-code-scanner';
// import { runOnJS } from 'react-native-reanimated';

// export default function QRScanner() {
//   const [hasPermission, setHasPermission] = useState(false);
//   const devices = useCameraDevices();
//   const device = devices.back;
//   const scannedRef = useRef(false);

//   useEffect(() => {
//     (async () => {
//       const permission = await Camera.requestCameraPermission();
//       setHasPermission(permission === 'authorized');
//     })();
//   }, []);

//   const onQRCodeScanned = (codes) => {
//     if (codes.length > 0 && !scannedRef.current) {
//       scannedRef.current = true;
//       const qrValue = codes[0].displayValue;
//       Alert.alert("QR Code", qrValue);
//     }
//   };

//   const frameProcessor = useFrameProcessor((frame) => {
//     'worklet';
//     const codes = scanQRCodes(frame);
//     runOnJS(onQRCodeScanned)(codes);
//   }, []);

//   if (device == null || !hasPermission) return <Text>Loading camera...</Text>;

//   return (
//     <View style={styles.container}>
//       <Camera
//         style={StyleSheet.absoluteFill}
//         device={device}
//         isActive={true}
//         frameProcessor={frameProcessor}
//         frameProcessorFps={5}
//       />
//     </View>
//   );
// }

// const styles = StyleSheet.create({
//   container: {
//     flex: 1,
//   },
// });